"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@rjsf/core"),t=require("react"),r=require("@heroicons/react/20/solid"),a=require("@rjsf/utils"),n=require("react-dnd"),l=require("react-dnd-html5-backend"),i=require("classnames"),o=require("@samuelmeuli/font-manager");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=u(t),s=u(i);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},c.apply(this,arguments)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function f(e,t){if(null==e)return{};var r,a,n={},l=Object.keys(e);for(a=0;a<l.length;a++)t.indexOf(r=l[a])>=0||(n[r]=e[r]);return n}var p=["uiSchema","registry"];function g(e){var t=f(e,p);return d.default.createElement("button",c({},t,{className:"flex items-center w-full px-3 py-[9px] rounded text-sm text-left text-slate-700 font-medium border border-dashed border-slate-300 hover:border-slate-400 "+t.className,title:"Add Item"}),d.default.createElement(r.PlusIcon,{className:"w-[18px] h-[18px] mr-2"}),"Add Item")}var v=["key"];function y(e){var t=e.canAdd,r=e.className,i=e.disabled,o=e.idSchema,u=e.uiSchema,s=e.items,m=e.onAddClick,p=e.readonly,g=e.registry,y=e.required,b=e.schema,h=e.title,E=a.getUiOptions(u),x=a.getTemplate("ArrayFieldDescriptionTemplate",g,E),F=a.getTemplate("ArrayFieldItemTemplate",g,E),N=a.getTemplate("ArrayFieldTitleTemplate",g,E),S=g.templates.ButtonTemplates.AddButton;return d.default.createElement(n.DndProvider,{backend:l.HTML5Backend},d.default.createElement("fieldset",{className:r,id:o.$id},d.default.createElement(N,{idSchema:o,title:E.title||h,required:y,schema:b,uiSchema:u,registry:g}),d.default.createElement(x,{idSchema:o,description:E.description||b.description,schema:b,uiSchema:u,registry:g}),d.default.createElement("div",{className:"row array-item-list"},s&&s.map((function(e){var t=e.key,r=f(e,v);return d.default.createElement(F,c({key:t},r))}))),t&&d.default.createElement(S,{className:"array-item-add",onClick:m,disabled:i||p,uiSchema:u,registry:g})))}function b(e){var a=e.children,l=e.className,i=e.disabled,o=e.hasToolbar,u=e.hasMoveDown,m=e.hasMoveUp,f=e.hasRemove,p=e.index,g=e.onDropIndexClick,v=e.onReorderClick,y=e.readonly,b=e.registry,h=b.templates.ButtonTemplates.RemoveButton,E=t.useState(!1),x=E[0],F=E[1],N=t.useRef(null),S={};if(m||u){var T=n.useDrop({accept:"item",hover:function(e,t){var r;if(N.current){var a=e.index,n=p;if(a!==n){var l=null==(r=N.current)?void 0:r.getBoundingClientRect(),i=(l.bottom-l.top)/2,o=t.getClientOffset().y-l.top;a<n&&o<i||a>n&&o>i||(v(a,n)(""),e.index=n)}}}})[1],k=n.useDrag({type:"item",item:function(){return{index:p}},collect:function(e){return{isDragging:e.isDragging()}}}),w=k[0].isDragging?.3:1;(0,k[1])(T(N)),S={style:{opacity:w}}}var I="Untitled";return a.props.formData&&a.props.formData.title&&(I=a.props.formData.title),d.default.createElement("div",c({className:l+" mb-4",ref:N},S),d.default.createElement("div",{className:s.default("flex items-center w-full p-3 py-2.5 rounded text-sm text-left text-slate-700 font-medium cursor-pointer",{"bg-slate-100":!o,"border border-slate-200":o&&!x,"border border-slate-300":o&&x}),onClick:function(){return F((function(e){return!e}))}},d.default.createElement("div",{className:"grow line-clamp-1"},I),d.default.createElement(r.ChevronRightIcon,{className:"h-5 w-5 "+(x?"rotate-90 transform":"")})),d.default.createElement("div",{className:s.default("relative",{hidden:!x,block:x})},d.default.createElement("div",{className:"px-2.5 pt-5"},a),o&&d.default.createElement("div",{className:"ml-3 mb-4"},f&&d.default.createElement(h,{disabled:i||y,onClick:g(p),registry:b}))))}function h(e){var t=e.id,r=e.placeholder,n=e.required,l=e.readonly,i=e.disabled,o=e.type,u=e.value,m=e.onChange,f=e.onBlur,p=e.onFocus,g=e.autofocus,v=e.options,y=e.schema,b=e.rawErrors,h=void 0===b?[]:b,E=e.children,x=c({},e.extraProps,a.getInputProps(y,o,v));return d.default.createElement(d.default.Fragment,null,d.default.createElement("input",c({id:t,name:t,placeholder:r,autoFocus:g,required:n,disabled:i,readOnly:l,className:s.default("mt-1 block w-full text-[15px]",{"is-invalid":h.length>0,"file:mr-3 file:font-medium file:text-sm file:border-none file:bg-slate-200 file:py-1 file:px-3 file:rounded-md file:cursor-pointer p-[7px]":"file"===o,"bg-white h-[42px] p-[5px] cursor-pointer":"color"===o,"rounded-md border border-slate-300 shadow-sm focus:border-indigo-600 focus:ring focus:ring-indigo-200 focus:ring-opacity-50":"range"!==o}),list:y.examples?a.examplesId(t):void 0},x,{value:u||0===u?u:"",onChange:function(e){var t=e.target.value;return m(""===t?v.emptyValue:t)},onBlur:function(e){return f(t,e.target.value)},onFocus:function(e){return p(t,e.target.value)},"aria-describedby":a.ariaDescribedByIds(t,!!y.examples)})),E,Array.isArray(y.examples)?d.default.createElement("datalist",{id:a.examplesId(t)},y.examples.concat(y.default&&!y.examples.includes(y.default)?[y.default]:[]).map((function(e){return d.default.createElement("option",{key:e,value:e})}))):null)}function E(e){var t=e.description;return t?d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{id:e.id,className:"mb-3"},t)):null}function x(e){var t=e.errors,r=void 0===t?[]:t;if(0===r.length)return null;var n=a.errorId(e.idSchema);return d.default.createElement("div",null,d.default.createElement("ul",{id:n,className:"error-detail bs-callout bs-callout-info"},r.filter((function(e){return!!e})).map((function(e,t){return d.default.createElement("li",{className:"text-red-700 text-sm",key:t},e)}))))}function F(e){var t=e.id,r=e.children,n=e.displayLabel,l=e.rawErrors,i=void 0===l?[]:l,o=e.errors,u=e.help,c=e.rawDescription,m=e.classNames,f=e.style,p=e.disabled,g=e.label,v=e.hidden,y=e.onDropPropertyClick,b=e.onKeyChange,h=e.readonly,E=e.required,x=e.schema,F=e.uiSchema,N=e.registry,S=a.getUiOptions(F),T=a.getTemplate("WrapIfAdditionalTemplate",N,S);return v?d.default.createElement("div",{className:"hidden"},r):d.default.createElement(T,{classNames:m,style:f,disabled:p,id:t,label:g,onDropPropertyClick:y,onKeyChange:b,readonly:h,required:E,schema:x,uiSchema:F,registry:N},d.default.createElement(d.default.Fragment,null,n&&" "!==g&&d.default.createElement("label",{htmlFor:t,className:s.default("block mb-2 text-sm font-medium",{"text-red-700":i.length>0,"text-slate-700":i.length<0})},g,E?"*":null),r,n&&c&&d.default.createElement("p",{className:i.length>0?"text-red-700":"text-slate-500"},c),o,u))}var N=["icon","iconType","className","registry"];function S(e){var t=e.icon,a=e.className,n=f(e,N);return d.default.createElement("button",c({},n,{className:"block rounded-[5px] border border-slate-200 p-0.5 mb-1 cursor-pointer"}),"up"===t?d.default.createElement(r.ArrowSmallUpIcon,{className:a}):null,"down"===t?d.default.createElement(r.ArrowSmallDownIcon,{className:a}):null,"remove"===t?d.default.createElement(r.XMarkIcon,{className:a}):null)}function T(e){return d.default.createElement(S,c({title:"Move down"},e,{icon:"down"}))}function k(e){return d.default.createElement(S,c({title:"Move up"},e,{icon:"up"}))}function w(e){return d.default.createElement("button",c({},e,{className:"flex items-center text-[13px] text-red-700 border border-red-700 rounded-[5px] py-0.5 px-2 hover:bg-red-700 hover:text-white"}),d.default.createElement(r.TrashIcon,{className:"w-3 h-3 mr-1"}),"Remove")}function I(e){var r=t.useState(e.properties[0].name),a=r[0],n=r[1];return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:"flex items-center justify-between bg-slate-100 p-1 rounded-md mb-6"},e.properties.map((function(e,t){return d.default.createElement("button",{key:t,type:"button",onClick:function(){return n(e.name)},className:s.default("text-sm py-2 w-1/3 rounded-md capitalize",{"bg-white font-medium":a===e.name})},e.name)}))),e.properties.map((function(e,t){return d.default.createElement("div",{key:t,title:e.name,className:s.default({hidden:a!==e.name})},e.children.map((function(e,t){return d.default.createElement("div",{key:t,className:"mb-5"},e)})))})))}function O(e){var t=e.description,r=e.title,n=e.properties,l=e.required,i=e.uiSchema,o=e.idSchema,u=e.schema,s=e.registry,c=a.getUiOptions(i),m=a.getTemplate("TitleFieldTemplate",s,c),f=a.getTemplate("DescriptionFieldTemplate",s,c);return d.default.createElement(d.default.Fragment,null,(c.title||r)&&d.default.createElement(m,{id:a.titleId(o),title:c.title||r,required:l,schema:u,uiSchema:i,registry:s}),(c.description||t)&&d.default.createElement(f,{id:a.descriptionId(o),description:c.description||t,schema:u,uiSchema:i,registry:s}),d.default.createElement("div",{className:"p-0"},D({properties:n,groups:i["ui:tabs"],props:e})))}var A=Symbol("REST"),C=Symbol("EXTRANEOUS");function D(e){var t=e.properties,r=e.groups,a=e.props;if(!Array.isArray(r))return d.default.createElement(d.default.Fragment,null,t.map((function(e,t){return d.default.createElement("div",{key:t,className:e.hidden?"hidden":"mb-5"},e.content)})));var n=r.map((function(e,r){if("string"==typeof e){var n=t.filter((function(t){return t.name===e}));return 1===n.length?n[0].content:C}if("object"==typeof e){var l=Object.keys(e).reduce((function(r,n){var l=e[n];return n.startsWith("ui:")?r:Array.isArray(l)?[].concat(r,[{name:n,children:D({properties:t,props:a,groups:l})}]):r}),[]);return d.default.createElement(I,{key:r,properties:l})}throw new Error("Invalid object type: "+typeof e+" "+e)}));if(n.filter((function(e){return e===A})).length>0)throw new Error("Remainder fields not supported");var l=n.filter((function(e){return e===C}));if(l.length)throw new Error("Extranoues fields"+l);return n}function B(e){var t=a.getSubmitButtonOptions(e.uiSchema),r=t.submitText;return t.norender?null:d.default.createElement("div",null,d.default.createElement("button",c({type:"submit"},t.props),r))}function P(e){var t=e.id,r=e.title,n=a.getUiOptions(e.uiSchema);return d.default.createElement("div",{id:t,className:"mb-4"},d.default.createElement("h5",{className:"block mb-2 text-sm font-medium"},n.title||r))}function q(e){var t=e.children,r=e.disabled,n=e.id,l=e.label,i=e.onDropPropertyClick,o=e.onKeyChange,u=e.readonly,s=e.required,c=e.uiSchema,m=e.registry,f=m.templates.ButtonTemplates.RemoveButton;return d.default.createElement("div",{className:e.classNames,style:e.style},a.ADDITIONAL_PROPERTY_FLAG in e.schema?d.default.createElement("div",{className:"row"},d.default.createElement("div",{className:"col-xs-5 form-additional"},d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{htmlFor:n+"-key"},l+" Key"),d.default.createElement("input",{className:"form-control",required:s,type:"text",id:n+"-key",onBlur:function(e){return o(e.target.value)},defaultValue:l}))),d.default.createElement("div",{className:"form-additional form-group col-xs-5"},t),d.default.createElement("div",{className:"col-xs-2"},d.default.createElement(f,{className:"array-item-remove btn-block",style:{border:"0"},disabled:r||u,onClick:i(l),uiSchema:c,registry:m}))):t)}function M(){return{ArrayFieldTemplate:y,ArrayFieldItemTemplate:b,BaseInputTemplate:h,ButtonTemplates:{AddButton:g,MoveDownButton:T,MoveUpButton:k,RemoveButton:w,SubmitButton:B},DescriptionFieldTemplate:E,FieldErrorTemplate:x,FieldTemplate:F,ObjectFieldTemplate:O,TitleFieldTemplate:P,WrapIfAdditionalTemplate:q}}var L=M();function U(e){var t=a.getTemplate("BaseInputTemplate",e.registry,e.options);return d.default.createElement(t,c({},e,{type:"file"}))}var _=function(e){var t,a;function n(t){var a;(a=e.call(this,t)||this).fontManager=void 0,a.state={expanded:!1,loadingStatus:"loading"},a.componentDidMount=function(){a.fontManager.init().then((function(){a.setState({loadingStatus:"finished"})})).catch((function(e){a.setState({loadingStatus:"error"}),console.error("Error trying to fetch the list of available fonts"),console.error(e)}))},a.componentDidUpdate=function(e){var t=a.props,r=t.activeFontFamily,n=t.onChange;r!==e.activeFontFamily&&a.setActiveFontFamily(r),n!==e.onChange&&a.fontManager.setOnChange(n)},a.onClose=function(e){for(var t=e.target,r=document.getElementById("font-picker"+a.fontManager.selectorSuffix);;){if(t===r)return;if(!t.parentNode)return void a.toggleExpanded();t=t.parentNode}},a.onSelection=function(e){var t=e.target.textContent;if(!t)throw Error("Missing font family in clicked font button");a.setActiveFontFamily(t),a.toggleExpanded()},a.setActiveFontFamily=function(e){a.fontManager.setActiveFont(e)},a.generateFontList=function(e){var t=a.props.activeFontFamily,r=a.state,n=r.expanded;return"finished"!==r.loadingStatus?d.default.createElement("div",null):d.default.createElement("ul",{className:s.default("font-list !bg-white !rounded-md !border !border-slate-300 !shadow-sm !top-12",{hidden:!n})},e.map((function(e){var r=e.family===t,n=e.family.replace(/\s+/g,"-").toLowerCase();return d.default.createElement("li",{key:n,className:"font-list-item"},d.default.createElement("button",{type:"button",id:"font-button-"+n+a.fontManager.selectorSuffix,className:s.default("font-button !text-[15px] hover:!bg-slate-100",{"!bg-slate-200":r}),onClick:a.onSelection,onKeyPress:a.onSelection},e.family))})))},a.toggleExpanded=function(){a.state.expanded?(a.setState({expanded:!1}),document.removeEventListener("click",a.onClose)):(a.setState({expanded:!0}),document.addEventListener("click",a.onClose))},a.render=function(){var e=a.props,t=e.activeFontFamily,n=e.sort,l=a.state,i=l.expanded,o=l.loadingStatus;console.log(o);var u=Array.from(a.fontManager.getFonts().values());return"alphabet"===n&&u.sort((function(e,t){return e.family.localeCompare(t.family)})),d.default.createElement("div",{id:"font-picker"+a.fontManager.selectorSuffix,className:s.default("!w-full !bg-transparent !rounded-md !border !border-slate-300 !shadow-sm",{expanded:i})},d.default.createElement("button",{type:"button",className:"dropdown-button !h-[42px] !bg-white !rounded-md focus:border-indigo-600 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",onClick:a.toggleExpanded,onKeyPress:a.toggleExpanded},d.default.createElement("p",{className:"dropdown-font-family"},t),d.default.createElement("p",null,d.default.createElement(r.ChevronDownIcon,{className:"h-5 w-5 "+(i?"rotate-180 transform":"")}))),"finished"===o&&a.generateFontList(u))};var n=a.props;return a.fontManager=new o.FontManager(n.apiKey,n.activeFontFamily,{pickerId:n.pickerId,families:n.families,categories:n.categories,scripts:n.scripts,variants:n.variants,filter:n.filter,limit:n.limit,sort:n.sort},n.onChange),a}return a=e,(t=n).prototype=Object.create(a.prototype),t.prototype.constructor=t,m(t,a),n}(t.PureComponent);function j(e){var r=e.onChange,a=e.id,n=t.useState(e.value||"Inter"),l=n[0],i=n[1],o=a.replace(/[^a-z0-9]+/gi,"");return d.default.createElement(d.default.Fragment,null,d.default.createElement(_,{apiKey:"AIzaSyD8KNrMxpVkc3bxqamNlkN4LZp6kqohlS8",activeFontFamily:l,pickerId:o,sort:"popularity",onChange:function(e){i(e.family),r(e.family||void 0)}}))}function R(e){var t=e.schema,r=e.id,n=e.options,l=e.required,i=e.disabled,o=e.readonly,u=e.multiple,c=e.autofocus,m=e.onChange,f=e.onBlur,p=e.onFocus,g=e.placeholder,v=e.rawErrors,y=void 0===v?[]:v,b=n.enumOptions,h=n.enumDisabled,E=n.emptyValue,x=u?[]:"";function F(e,t){return t?[].slice.call(e.target.options).filter((function(e){return e.selected})).map((function(e){return e.value})):e.target.value}var N=a.enumOptionsIndexForValue(e.value,b,u);return d.default.createElement("select",{id:r,name:r,value:void 0===N?x:N,required:l,multiple:u,disabled:i||o,autoFocus:c,className:s.default("mt-1 block w-full text-[15px] rounded-md border-slate-300 shadow-sm focus:border-indigo-600 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",{"is-invalid":y.length>0}),onBlur:f&&function(e){var t=F(e,u);f(r,a.enumOptionsValueForIndex(t,b,E))},onFocus:p&&function(e){var t=F(e,u);p(r,a.enumOptionsValueForIndex(t,b,E))},onChange:function(e){var t=F(e,u);m(a.enumOptionsValueForIndex(t,b,E))},"aria-describedby":a.ariaDescribedByIds(r)},!u&&void 0===t.default&&d.default.createElement("option",{value:""},g),b.map((function(e,t){var r=e.value,a=e.label,n=Array.isArray(h)&&-1!=h.indexOf(r);return d.default.createElement("option",{key:t,id:a,value:String(t),disabled:n},a)})))}function K(e){var t=e.id,r=e.onBlur,n=e.onFocus,l=e.onChange,i=e.options;return d.default.createElement("textarea",{id:t,name:t,placeholder:e.placeholder,disabled:e.disabled,readOnly:e.readonly,value:e.value,required:e.required,autoFocus:e.autofocus,className:"mt-1 block w-full text-[15px] rounded-md border-slate-300 shadow-sm focus:border-indigo-600 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",rows:i.rows||5,onChange:function(e){var t=e.target.value;return l(""===t?i.emptyValue:t)},onBlur:function(e){return r(t,e.target.value)},onFocus:function(e){return n(t,e.target.value)},"aria-describedby":a.ariaDescribedByIds(t)})}function V(){return{FileWidget:U,FontsWidget:j,SelectWidget:R,TextareaWidget:K}}_.defaultProps={activeFontFamily:o.FONT_FAMILY_DEFAULT,onChange:function(){},pickerId:o.OPTIONS_DEFAULTS.pickerId,families:o.OPTIONS_DEFAULTS.families,categories:o.OPTIONS_DEFAULTS.categories,scripts:o.OPTIONS_DEFAULTS.scripts,variants:o.OPTIONS_DEFAULTS.variants,filter:o.OPTIONS_DEFAULTS.filter,limit:o.OPTIONS_DEFAULTS.limit,sort:o.OPTIONS_DEFAULTS.sort};var W=V();function z(){return{templates:M(),widgets:V()}}var X=z();function Y(){return e.withTheme(z())}var G=Y();exports.Form=G,exports.Templates=L,exports.Theme=X,exports.Widgets=W,exports.default=G,exports.generateForm=Y,exports.generateTemplates=M,exports.generateTheme=z,exports.generateWidgets=V;
//# sourceMappingURL=rjsf-tailwind.cjs.production.min.js.map
